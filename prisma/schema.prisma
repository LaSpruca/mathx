generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model Round {
  id         Int          @id @default(autoincrement())
  level      Int
  duration   Int
  questions  Question[]
  RoundScore RoundScore[]
}

model Team {
  id         Int                @id @default(autoincrement())
  name       String
  level      Int
  responses  QuestionResponse[]
  RoundScore RoundScore[]
}

model RoundScore {
  id      Int   @id @default(autoincrement())
  round   Round @relation(fields: [roundId], references: [id])
  team    Team  @relation(fields: [teamId], references: [id])
  roundId Int
  teamId  Int
  score   Int   @default(0)
}

model Question {
  id         Int                @id @default(autoincrement())
  level      Int
  answer     String
  number     Int
  tieBreaker Boolean            @default(false)
  responses  QuestionResponse[]
  Round      Round?             @relation(fields: [roundId], references: [id])
  roundId    Int?
}

model QuestionResponse {
  id         Int      @id @default(autoincrement())
  skiped     Boolean  @default(false)
  correct    Boolean  @default(false)
  attempts   Int      @default(0)
  team       Team     @relation(fields: [teamId], references: [id])
  teamId     Int
  question   Question @relation(fields: [questionId], references: [id])
  questionId Int
}
